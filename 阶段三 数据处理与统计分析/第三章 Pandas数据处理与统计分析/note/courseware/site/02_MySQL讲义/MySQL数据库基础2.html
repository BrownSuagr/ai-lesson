
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../img/logo.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.5">
    
    
      
        <title>2 MySQL数据库基础II - 数据处理与统计分析 V3.0</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2d9f7617.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#2-mysqlii" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href=".." title="数据处理与统计分析 V3.0" class="md-header__button md-logo" aria-label="数据处理与统计分析 V3.0" data-md-component="logo">
      
  <img src="../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            数据处理与统计分析 V3.0
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              2 MySQL数据库基础II
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="数据处理与统计分析 V3.0" class="md-nav__button md-logo" aria-label="数据处理与统计分析 V3.0" data-md-component="logo">
      
  <img src="../img/logo.png" alt="logo">

    </a>
    数据处理与统计分析 V3.0
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          第一章 Linux
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="第一章 Linux" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          第一章 Linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01_Linux%E8%AE%B2%E4%B9%89/01_Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F.html" class="md-nav__link">
        1 Linux操作系统
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01_Linux%E8%AE%B2%E4%B9%89/02_Linux%E7%B3%BB%E7%BB%9F%E9%AB%98%E7%BA%A7.html" class="md-nav__link">
        2 Linux系统高级
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          第二章 MySQL
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="第二章 MySQL" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          第二章 MySQL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%801.html" class="md-nav__link">
        1 MySQL数据库基础I
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          2 MySQL数据库基础II
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%802.html" class="md-nav__link md-nav__link--active">
        2 MySQL数据库基础II
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sql" class="md-nav__link">
    九、SQL约束
  </a>
  
    <nav class="md-nav" aria-label="九、SQL约束">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    1、主键约束
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    2、非空约束
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    3、唯一约束
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    4、默认值约束
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    5、外键约束(了解)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6" class="md-nav__link">
    6、小结
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dql" class="md-nav__link">
    十、DQL数据查询语言
  </a>
  
    <nav class="md-nav" aria-label="十、DQL数据查询语言">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    1、数据集准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2select" class="md-nav__link">
    2、select查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_1" class="md-nav__link">
    3、简单查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_1" class="md-nav__link">
    4、条件查询
  </a>
  
    <nav class="md-nav" aria-label="4、条件查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    ☆ 比较查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    ☆ 范围查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    ☆ 逻辑查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    ☆ 模糊查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    ☆ 非空查询
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5_1" class="md-nav__link">
    5、排序查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6_1" class="md-nav__link">
    6、聚合查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7having" class="md-nav__link">
    7、分组查询与having子句
  </a>
  
    <nav class="md-nav" aria-label="7、分组查询与having子句">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    ☆ 分组查询介绍
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#group-by" class="md-nav__link">
    ☆ group by的使用
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#group-by_1" class="md-nav__link">
    ☆ group by + 聚合函数的使用
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#group-by-having" class="md-nav__link">
    ☆ group by + having的使用
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#with-rollup" class="md-nav__link">
    ☆ 扩展：with rollup回溯统计
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8limit" class="md-nav__link">
    8、limit分页查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9" class="md-nav__link">
    9、小结
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    十一、多表查询
  </a>
  
    <nav class="md-nav" aria-label="十一、多表查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    数据集准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    交叉连接(了解)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1_2" class="md-nav__link">
    1、内连接
  </a>
  
    <nav class="md-nav" aria-label="1、内连接">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    ☆ 连接查询的介绍
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    ☆ 内连接查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    ☆ 小结
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    2、左外连接
  </a>
  
    <nav class="md-nav" aria-label="2、左外连接">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    ☆ 左连接查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    ☆ 小结
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_2" class="md-nav__link">
    3、右外连接
  </a>
  
    <nav class="md-nav" aria-label="3、右外连接">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    ☆ 右连接查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    ☆ 小结
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    十二、子查询(三步走)
  </a>
  
    <nav class="md-nav" aria-label="十二、子查询(三步走)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_3" class="md-nav__link">
    1、子查询（嵌套查询）的介绍
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_2" class="md-nav__link">
    2、子查询的使用
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_3" class="md-nav__link">
    3、小结
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    掌握子查询编写三步走
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E9%AB%98%E7%BA%A7.html" class="md-nav__link">
        3 MySQL高级
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          第三章 环境搭建
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="第三章 环境搭建" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          第三章 环境搭建
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../03_%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/01_%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" class="md-nav__link">
        1 环境搭建及使用
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          第四章 NumPy
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="第四章 NumPy" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          第四章 NumPy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../04_NumPy%E8%AE%B2%E4%B9%89/01_NumPy%E8%AE%B2%E4%B9%89.html" class="md-nav__link">
        1 NumPy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../04_NumPy%E8%AE%B2%E4%B9%89/02_%E5%B8%B8%E7%94%A8%E6%A6%82%E5%BF%B5.html" class="md-nav__link">
        2 常用概念
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          第五章 Pandas
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="第五章 Pandas" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          第五章 Pandas
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../05_Pandas%E8%AE%B2%E4%B9%89/01_Python%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E7%AE%80%E4%BB%8B.html" class="md-nav__link">
        1 Python 数据分析处理简介
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../05_Pandas%E8%AE%B2%E4%B9%89/02_Pandas_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html" class="md-nav__link">
        2 Pandas 数据结构
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../05_Pandas%E8%AE%B2%E4%B9%89/03_Pandas_DataFrame%E5%85%A5%E9%97%A8.html" class="md-nav__link">
        3 Pandas DataFrame 入门
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../05_Pandas%E8%AE%B2%E4%B9%89/04_Pandas%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%85%A5%E9%97%A8.html" class="md-nav__link">
        4 Pandas 数据分析入门
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../05_Pandas%E8%AE%B2%E4%B9%89/05_%E6%95%B0%E6%8D%AE%E7%BB%84%E5%90%88.html" class="md-nav__link">
        5 数据组合
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../05_Pandas%E8%AE%B2%E4%B9%89/06_%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97.html" class="md-nav__link">
        6 数据清洗
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../05_Pandas%E8%AE%B2%E4%B9%89/07_apply%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0.html" class="md-nav__link">
        7 apply 自定义函数
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../05_Pandas%E8%AE%B2%E4%B9%89/08_%E6%95%B0%E6%8D%AE%E5%88%86%E7%BB%84.html" class="md-nav__link">
        8 数据分组
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../05_Pandas%E8%AE%B2%E4%B9%89/09_%E6%95%B0%E6%8D%AE%E9%80%8F%E8%A7%86%E8%A1%A8.html" class="md-nav__link">
        9 数据透视表
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../05_Pandas%E8%AE%B2%E4%B9%89/10_datetime%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html" class="md-nav__link">
        10 datetime 数据类型
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          第六章 数据分析绘图
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="第六章 数据分析绘图" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          第六章 数据分析绘图
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../06_%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E7%BB%98%E5%9B%BE/01_%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E4%BB%8B%E7%BB%8D.html" class="md-nav__link">
        1 Python数据可视化
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../06_%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E7%BB%98%E5%9B%BE/02_Matplotlib%E7%BB%98%E5%9B%BE.html" class="md-nav__link">
        2 Matplotlib绘图
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../06_%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E7%BB%98%E5%9B%BE/03_Pandas%E7%BB%98%E5%9B%BE.html" class="md-nav__link">
        3 Pandas绘图
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../06_%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E7%BB%98%E5%9B%BE/04_Seaborn%E7%BB%98%E5%9B%BE.html" class="md-nav__link">
        4 Seaborn 可视化
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          第七章 综合案例
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="第七章 综合案例" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          第七章 综合案例
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../07_%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/01_RFM%E4%BC%9A%E5%91%98%E4%BB%B7%E5%80%BC%E5%BA%A6%E6%A8%A1%E5%9E%8B%E6%A1%88%E4%BE%8B.html" class="md-nav__link">
        1 RFM会员价值度模型案例
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sql" class="md-nav__link">
    九、SQL约束
  </a>
  
    <nav class="md-nav" aria-label="九、SQL约束">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    1、主键约束
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    2、非空约束
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    3、唯一约束
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    4、默认值约束
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    5、外键约束(了解)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6" class="md-nav__link">
    6、小结
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dql" class="md-nav__link">
    十、DQL数据查询语言
  </a>
  
    <nav class="md-nav" aria-label="十、DQL数据查询语言">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    1、数据集准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2select" class="md-nav__link">
    2、select查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_1" class="md-nav__link">
    3、简单查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_1" class="md-nav__link">
    4、条件查询
  </a>
  
    <nav class="md-nav" aria-label="4、条件查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    ☆ 比较查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    ☆ 范围查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    ☆ 逻辑查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    ☆ 模糊查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    ☆ 非空查询
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5_1" class="md-nav__link">
    5、排序查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6_1" class="md-nav__link">
    6、聚合查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7having" class="md-nav__link">
    7、分组查询与having子句
  </a>
  
    <nav class="md-nav" aria-label="7、分组查询与having子句">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    ☆ 分组查询介绍
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#group-by" class="md-nav__link">
    ☆ group by的使用
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#group-by_1" class="md-nav__link">
    ☆ group by + 聚合函数的使用
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#group-by-having" class="md-nav__link">
    ☆ group by + having的使用
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#with-rollup" class="md-nav__link">
    ☆ 扩展：with rollup回溯统计
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8limit" class="md-nav__link">
    8、limit分页查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9" class="md-nav__link">
    9、小结
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    十一、多表查询
  </a>
  
    <nav class="md-nav" aria-label="十一、多表查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    数据集准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    交叉连接(了解)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1_2" class="md-nav__link">
    1、内连接
  </a>
  
    <nav class="md-nav" aria-label="1、内连接">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    ☆ 连接查询的介绍
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    ☆ 内连接查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    ☆ 小结
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    2、左外连接
  </a>
  
    <nav class="md-nav" aria-label="2、左外连接">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    ☆ 左连接查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    ☆ 小结
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_2" class="md-nav__link">
    3、右外连接
  </a>
  
    <nav class="md-nav" aria-label="3、右外连接">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    ☆ 右连接查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    ☆ 小结
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    十二、子查询(三步走)
  </a>
  
    <nav class="md-nav" aria-label="十二、子查询(三步走)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_3" class="md-nav__link">
    1、子查询（嵌套查询）的介绍
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_2" class="md-nav__link">
    2、子查询的使用
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_3" class="md-nav__link">
    3、小结
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    掌握子查询编写三步走
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="2-mysqlii">2 MySQL数据库基础II<a class="headerlink" href="#2-mysqlii" title="Permanent link">&para;</a></h1>
<h2 id="sql">九、SQL约束<a class="headerlink" href="#sql" title="Permanent link">&para;</a></h2>
<p>回顾建表的基本语法：</p>
<div class="highlight"><pre><span></span><code><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="err">数据表名称</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="err">字段名称</span><span class="mi">1</span><span class="w"> </span><span class="err">字段类型</span><span class="w"> </span><span class="p">[</span><span class="err">字段约束</span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="err">字段名称</span><span class="mi">2</span><span class="w"> </span><span class="err">字段类型</span><span class="w"> </span><span class="p">[</span><span class="err">字段约束</span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="p">)</span><span class="w"> </span><span class="n">engine</span><span class="o">=</span><span class="n">innodb</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">charset</span><span class="o">=</span><span class="n">utf8</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<h3 id="1">1、主键约束<a class="headerlink" href="#1" title="Permanent link">&para;</a></h3>
<p>1、PRIMARY KEY 约束唯一标识数据库表中的每条记录。
2、主键必须包含唯一的值。
3、主键列不能包含 NULL 值。
4、每个表都应该有一个主键，并且每个表只能有一个主键。</p>
<p>遵循原则：</p>
<p>1）主键应当是对用户没有意义的
2）永远也不要更新主键。
3）主键不应包含动态变化的数据，如时间戳、创建时间列、修改时间列等。
4） 主键应当由计算机自动生成。</p>
<p>创建主键约束：创建表时，在字段描述处，声明指定字段为主键</p>
<p><img alt="image-20210906183745166" src="media/image-20210906183745166.png" /></p>
<p>案例：创建一个学生信息表tb_students，包含编号id、学生姓名name、年龄age、性别gender以及家庭住址address等字段，然后将id设置为主键。</p>
<div class="highlight"><pre><span></span><code><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tb_students</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">age</span><span class="w"> </span><span class="n">tinyint</span><span class="w"> </span><span class="n">unsigned</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">gender</span><span class="w"> </span><span class="n">enum</span><span class="p">(</span><span class="s1">&#39;男&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;女&#39;</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">address</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"></span>
<span class="p">)</span><span class="w"> </span><span class="n">engine</span><span class="o">=</span><span class="n">innodb</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">charset</span><span class="o">=</span><span class="n">utf8</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>删除主键约束：如需撤销 PRIMARY KEY 约束，请使用下面的 SQL</p>
<div class="highlight"><pre><span></span><code><span class="n">alter</span> <span class="n">table</span> <span class="n">persons2</span> <span class="n">drop</span> <span class="n">primary</span> <span class="n">key</span><span class="p">;</span>
</code></pre></div>
<p><img alt="image-20210906183908865" src="media/image-20210906183908865.png" /></p>
<p>案例：删除tb_students数据表的主键</p>
<div class="highlight"><pre><span></span><code><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tb_students</span><span class="w"> </span><span class="k">drop</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<blockquote>
<p>补充：自动增长</p>
</blockquote>
<p>我们通常希望在每次插入新记录时，数据库自动生成字段的值。</p>
<p>我们可以在表中使用 auto_increment（自动增长列）关键字，自动增长列类型必须是整型，自动增长列必须为键(一般是主键)。</p>
<p><strong>下列 SQL 语句把 "Persons" 表中的 "Id" 列定义为</strong> <strong>auto_increment</strong> <strong>主键</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">create</span> <span class="n">table</span> <span class="n">persons3</span><span class="p">(</span>
    <span class="n">id</span> <span class="n">int</span> <span class="n">auto_increment</span> <span class="n">primary</span> <span class="n">key</span><span class="p">,</span>
    <span class="n">first_name</span> <span class="n">varchar</span><span class="p">(</span><span class="n">255</span><span class="p">),</span>
    <span class="n">last_name</span> <span class="n">varchar</span><span class="p">(</span><span class="n">255</span><span class="p">),</span>
    <span class="n">address</span> <span class="n">varchar</span><span class="p">(</span><span class="n">255</span><span class="p">),</span>
    <span class="n">city</span> <span class="n">varchar</span><span class="p">(</span><span class="n">255</span><span class="p">)</span>
<span class="p">)</span> <span class="k">default</span> <span class="n">charset</span><span class="p">=</span><span class="n">utf8</span><span class="p">;</span>
</code></pre></div>
<p>向persons添加数据时，可以不为Id字段设置值，也可以设置成null，数据库将自动维护主键值：</p>
<div class="highlight"><pre><span></span><code><span class="n">insert</span> <span class="n">into</span> <span class="n">persons3</span><span class="p">(</span><span class="n">first_name</span><span class="p">,</span><span class="n">last_name</span><span class="p">)</span> <span class="n">values</span><span class="p">(</span><span class="s1">&#39;Bill&#39;</span><span class="p">,</span><span class="s1">&#39;Gates&#39;</span><span class="p">);</span>
<span class="n">insert</span> <span class="n">into</span> <span class="n">persons3</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="n">first_name</span><span class="p">,</span><span class="n">last_name</span><span class="p">)</span> <span class="n">values</span><span class="p">(</span><span class="n">null</span><span class="p">,</span><span class="s1">&#39;Bill&#39;</span><span class="p">,</span><span class="s1">&#39;Gates&#39;</span><span class="p">);</span>
</code></pre></div>
<p>运行效果：</p>
<p><img alt="image-20210906184220825" src="media/image-20210906184220825.png" /></p>
<p>案例：创建一个学生信息表tb_students，包含编号id、学生姓名name、年龄age、性别gender以及家庭住址address等字段，然后将id设置为主键自动增长列。</p>
<div class="highlight"><pre><span></span><code><span class="k">drop</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tb_students</span><span class="p">;</span><span class="w"></span>

<span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tb_students</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">auto_increment</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">age</span><span class="w"> </span><span class="n">tinyint</span><span class="w"> </span><span class="n">unsigned</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">gender</span><span class="w"> </span><span class="n">enum</span><span class="p">(</span><span class="s1">&#39;男&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;女&#39;</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">address</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"></span>
<span class="p">)</span><span class="w"> </span><span class="n">engine</span><span class="o">=</span><span class="n">innodb</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">charset</span><span class="o">=</span><span class="n">utf8</span><span class="p">;</span><span class="w"></span>
<span class="err">或</span><span class="w"></span>
<span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tb_students</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">auto_increment</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">age</span><span class="w"> </span><span class="n">tinyint</span><span class="w"> </span><span class="n">unsigned</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">gender</span><span class="w"> </span><span class="n">enum</span><span class="p">(</span><span class="s1">&#39;男&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;女&#39;</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">address</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"></span>
<span class="p">)</span><span class="w"> </span><span class="n">engine</span><span class="o">=</span><span class="n">innodb</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">charset</span><span class="o">=</span><span class="n">utf8</span><span class="p">;</span><span class="w"></span>

<span class="c1">-- 插入测试数据</span>
<span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tb_students</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;吕布&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;男&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;内蒙古包头市&#39;</span><span class="p">);</span><span class="w"></span>
<span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tb_students</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;貂蝉&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;女&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;山西忻州市&#39;</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<h3 id="2">2、非空约束<a class="headerlink" href="#2" title="Permanent link">&para;</a></h3>
<p>NOT NULL 约束强制列不接受 NULL 值。
NOT NULL 约束强制字段始终包含值。这意味着，如果不向字段添加值，就无法插入新记录或者更新记录。
下面的 SQL 语句强制 "id" 列和 "last_name" 列不接受 NULL 值：</p>
<p><img alt="image-20210906184938237" src="media/image-20210906184938237.png" /></p>
<p>案例：创建一个tb_news新闻表，包含id主键列、title新闻标题、description描述、content新闻内容以及addtime添加时间，要求为title字段添加非空约束。</p>
<div class="highlight"><pre><span></span><code><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tb_news</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">auto_increment</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">title</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">80</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">description</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">content</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">addtime</span><span class="w"> </span><span class="n">datetime</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"></span>
<span class="p">)</span><span class="w"> </span><span class="n">engine</span><span class="o">=</span><span class="n">innodb</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">charset</span><span class="o">=</span><span class="n">utf8</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<h3 id="3">3、唯一约束<a class="headerlink" href="#3" title="Permanent link">&para;</a></h3>
<p>UNIQUE 约束唯一标识数据库表中的每条记录。
UNIQUE 和 PRIMARY KEY 约束均为列或列集合提供了唯一性的保证。
PRIMARY KEY 拥有自动定义的 UNIQUE 约束。</p>
<p>请注意：
每个表可以有多个 UNIQUE 约束，但是每个表只能有一个 PRIMARY KEY 约束。</p>
<p><img alt="image-20210906185040009" src="media/image-20210906185040009.png" /></p>
<p>案例：创建一个tb_member会员表 ，包含字段有id主键、username用户名、password密码（密码必须使用密文保存，长度为固定的32位），由于用户名不允许出现重复的情况，所以请为username添加唯一约束。</p>
<div class="highlight"><pre><span></span><code><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tb_member</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">auto_increment</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">username</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">unique</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">password</span><span class="w"> </span><span class="nb">char</span><span class="p">(</span><span class="mi">32</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"></span>
<span class="p">)</span><span class="w"> </span><span class="n">engine</span><span class="o">=</span><span class="n">innodb</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">charset</span><span class="o">=</span><span class="n">utf8</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<h3 id="4">4、默认值约束<a class="headerlink" href="#4" title="Permanent link">&para;</a></h3>
<p>关键字：default</p>
<p>用来指定某列的默认值。在表中插入一条新记录时，如果没有为这个字段赋值，系统就会自动为这个字段插入默认值。</p>
<p>案例：创建一个tb_department部门表，包含字段id主键、name部门名称以及location部门位置。由于我们的部门位置位于北京的较多，所以部门位置就可以默认为“Beijing”。</p>
<div class="highlight"><pre><span></span><code><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tb_department</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">auto_increment</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="k">location</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="s1">&#39;Beijing&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"></span>
<span class="p">)</span><span class="w"> </span><span class="n">engine</span><span class="o">=</span><span class="n">innodb</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">charset</span><span class="o">=</span><span class="n">utf8</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<h3 id="5">5、外键约束(了解)<a class="headerlink" href="#5" title="Permanent link">&para;</a></h3>
<p>外键约束：关键字foreign key（主要用于==多表==关联使用）</p>
<p>比如：有两张数据表，这两个数据表之间==有联系==，通过了==某个字段==可以建立连接，这个字段在其中一个表中是==主键==，在另外一张表中，我们就把其称之为==外键==。</p>
<p><img alt="image-20220222174336589" src="media/image-20220222174336589.png" /></p>
<h3 id="6">6、小结<a class="headerlink" href="#6" title="Permanent link">&para;</a></h3>
<p>① 主键约束：唯一标示，不能重复，不能为空。
1）主键应当是对用户没有意义的
2）永远也不要更新主键。
3）主键不应包含动态变化的数据，如时间戳、创建时间列、修改时间列等。
4） 主键应当由计算机自动生成。</p>
<p>自动增长：
我们可以在表中使用 auto_increment（自动增长列）关键字，自动增长列类型必须是整型，自动增长列必须为键(一般是主键)。</p>
<p>② 非空约束：
NOT NULL 约束强制列不接受 NULL 值。</p>
<p>③ 唯一约束：
UNIQUE 约束唯一标识数据库表中的每条记录。
UNIQUE 和 PRIMARY KEY 约束均为列或列集合提供了唯一性的保证。
PRIMARY KEY 拥有自动定义的 UNIQUE 约束。</p>
<p>④ 默认值约束</p>
<p>default 默认值</p>
<p>用来指定某列的默认值。在表中插入一条新记录时，如果没有为这个字段赋值，系统就会自动为这个字段插入默认值。</p>
<p>⑤ 外键约束（了解）</p>
<p>主要用于指定两张表之间的关联关系。</p>
<h2 id="dql">十、DQL数据查询语言<a class="headerlink" href="#dql" title="Permanent link">&para;</a></h2>
<h3 id="1_1">1、数据集准备<a class="headerlink" href="#1_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">product</span><span class="w"></span>
<span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">pid</span><span class="w">         </span><span class="kt">INT</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">pname</span><span class="w">       </span><span class="kt">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">price</span><span class="w">       </span><span class="kt">DOUBLE</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">category_id</span><span class="w"> </span><span class="kt">VARCHAR</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>插入数据：</p>
<div class="highlight"><pre><span></span><code><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;联想&#39;</span><span class="p">,</span><span class="mi">5000</span><span class="p">,</span><span class="s1">&#39;c001’);</span>
<span class="s1">INSERT INTO product VALUES (2,&#39;</span><span class="n">海尔</span><span class="s1">&#39;,3000,&#39;</span><span class="n">c001’</span><span class="p">);</span><span class="w"></span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39;雷神&#39;</span><span class="p">,</span><span class="mi">5000</span><span class="p">,</span><span class="s1">&#39;c001’);</span>
<span class="s1">INSERT INTO product VALUES (4,&#39;</span><span class="n">杰克琼斯</span><span class="s1">&#39;,800,&#39;</span><span class="n">c002’</span><span class="p">);</span><span class="w"></span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;真维斯&#39;</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="s1">&#39;c002’);</span>
<span class="s1">INSERT INTO product VALUES (6,&#39;</span><span class="n">花花公子</span><span class="s1">&#39;,440,&#39;</span><span class="n">c002’</span><span class="p">);</span><span class="w"></span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="s1">&#39;劲霸&#39;</span><span class="p">,</span><span class="mi">2000</span><span class="p">,</span><span class="s1">&#39;c002’);</span>
<span class="s1">INSERT INTO product VALUES (8,&#39;</span><span class="n">香奈儿</span><span class="s1">&#39;,800,&#39;</span><span class="n">c003’</span><span class="p">);</span><span class="w"></span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="s1">&#39;相宜本草&#39;</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="s1">&#39;c003’);</span>
<span class="s1">INSERT INTO product VALUES (10,&#39;</span><span class="n">面霸</span><span class="s1">&#39;,5,&#39;</span><span class="n">c003’</span><span class="p">);</span><span class="w"></span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="s1">&#39;好想你枣&#39;</span><span class="p">,</span><span class="mi">56</span><span class="p">,</span><span class="s1">&#39;c004’);</span>
<span class="s1">INSERT INTO product VALUES (12,&#39;</span><span class="n">香飘飘奶茶</span><span class="s1">&#39;,1,&#39;</span><span class="n">c005’</span><span class="p">);</span><span class="w"></span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">13</span><span class="p">,</span><span class="s1">&#39;海澜之家&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;c002&#39;</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<h3 id="2select">2、select查询<a class="headerlink" href="#2select" title="Permanent link">&para;</a></h3>
<p>基础查询：</p>
<div class="highlight"><pre><span></span><code><span class="c"># 根据某些条件从某个表中查询指定字段的内容</span>
<span class="n">格式</span><span class="err">：</span><span class="nb">select </span><span class="no">[distinct]</span><span class="p">*|</span> <span class="n">列名</span><span class="p">,</span><span class="n">列名</span> <span class="n">from</span> <span class="n">表</span> <span class="nb">where </span><span class="n">条件</span>
</code></pre></div>
<p>高级查询：SQL查询五子句（重点）</p>
<div class="highlight"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="o">*/</span><span class="err">列名</span><span class="p">,</span><span class="err">列名</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="err">数据表</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="err">子句</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">子句</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="err">子句</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">子句</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="err">子句</span><span class="p">;</span><span class="w"></span>

<span class="err">①</span><span class="w"> </span><span class="n">where子句</span><span class="w"></span>
<span class="err">②</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="n">by子句</span><span class="w"></span>
<span class="err">③</span><span class="w"> </span><span class="n">having子句</span><span class="w"></span>
<span class="err">④</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="n">by子句</span><span class="w"></span>
<span class="err">⑤</span><span class="w"> </span><span class="n">limit子句</span><span class="w"></span>
</code></pre></div>
<h3 id="3_1">3、简单查询<a class="headerlink" href="#3_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 1.查询所有的商品.  </span><span class="w"></span>
<span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">  </span><span class="k">from</span><span class="w"> </span><span class="n">product</span><span class="p">;</span><span class="w"></span>
<span class="c1"># 2.查询商品名和商品价格. </span><span class="w"></span>
<span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="n">price</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">product</span><span class="p">;</span><span class="w"></span>
<span class="c1"># 3.查询结果是表达式（运算查询）：将所有商品的价格+10元进行显示.</span><span class="w"></span>
<span class="k">select</span><span class="w"> </span><span class="n">pname</span><span class="p">,</span><span class="n">price</span><span class="o">+</span><span class="mi">10</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">product</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<h3 id="4_1">4、条件查询<a class="headerlink" href="#4_1" title="Permanent link">&para;</a></h3>
<p><img alt="image-20210906185658519" src="media/image-20210906185658519.png" /></p>
<h4 id="_1">☆ 比较查询<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c"># 查询商品名称为“花花公子”的商品所有信息：</span>
<span class="nb">SELECT </span><span class="p">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="nb">WHERE </span><span class="n">pname</span> <span class="p">=</span> <span class="s1">&#39;花花公子&#39;</span><span class="p">;</span>
<span class="c"># 查询价格为800商品</span>
<span class="nb">SELECT </span><span class="p">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="nb">WHERE </span><span class="n">price</span> <span class="p">=</span> <span class="n">800</span><span class="p">;</span>
<span class="c"># 查询价格不是800的所有商品</span>
<span class="nb">SELECT </span><span class="p">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="nb">WHERE </span><span class="n">price</span> <span class="p">!=</span> <span class="n">800</span><span class="p">;</span>
<span class="nb">SELECT </span><span class="p">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="nb">WHERE </span><span class="n">price</span> <span class="p">&lt;&gt;</span> <span class="n">800</span><span class="p">;</span>
<span class="c"># 查询商品价格大于60元的所有商品信息</span>
<span class="nb">SELECT </span><span class="p">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="nb">WHERE </span><span class="n">price</span> <span class="p">&gt;</span> <span class="n">60</span><span class="p">;</span>
<span class="c"># 查询商品价格小于等于800元的所有商品信息</span>
<span class="nb">SELECT </span><span class="p">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="nb">WHERE </span><span class="n">price</span> <span class="p">&lt;=</span> <span class="n">800</span><span class="p">;</span>
</code></pre></div>
<h4 id="_2">☆ 范围查询<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c"># 查询商品价格在200到1000之间所有商品</span>
<span class="nb">SELECT </span><span class="p">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="nb">WHERE </span><span class="n">price</span> <span class="n">BETWEEN</span> <span class="n">200</span> <span class="n">AND</span> <span class="n">1000</span><span class="p">;</span>
<span class="c"># 查询商品价格是200或800的所有商品</span>
<span class="nb">SELECT </span><span class="p">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="nb">WHERE </span><span class="n">price</span> <span class="k">IN</span> <span class="p">(</span><span class="n">200</span><span class="p">,</span><span class="n">800</span><span class="p">);</span>
</code></pre></div>
<h4 id="_3">☆ 逻辑查询<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c"># 查询商品价格在200到1000之间所有商品</span>
<span class="nb">SELECT </span><span class="p">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="nb">WHERE </span><span class="n">price</span> <span class="p">&gt;=</span> <span class="n">200</span> <span class="n">AND</span> <span class="n">price</span> <span class="p">&lt;=</span><span class="n">1000</span><span class="p">;</span>
<span class="c"># 查询商品价格是200或800的所有商品</span>
<span class="nb">SELECT </span><span class="p">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="nb">WHERE </span><span class="n">price</span> <span class="p">=</span> <span class="n">200</span> <span class="n">OR</span> <span class="n">price</span> <span class="p">=</span> <span class="n">800</span><span class="p">;</span>
<span class="c"># 查询价格不是800的所有商品</span>
<span class="nb">SELECT </span><span class="p">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="nb">WHERE </span><span class="n">NOT</span><span class="p">(</span><span class="n">price</span> <span class="p">=</span> <span class="n">800</span><span class="p">);</span>
</code></pre></div>
<h4 id="_4">☆ 模糊查询<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c"># 查询以&#39;香&#39;开头的所有商品</span>
<span class="nb">SELECT </span><span class="p">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="nb">WHERE </span><span class="n">pname</span> <span class="n">LIKE</span> <span class="s1">&#39;香%&#39;</span><span class="p">;</span>
<span class="c"># 查询第二个字为&#39;想&#39;的所有商品</span>
<span class="nb">SELECT </span><span class="p">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="nb">WHERE </span><span class="n">pname</span> <span class="n">LIKE</span> <span class="s1">&#39;_想%&#39;</span><span class="p">;</span>
</code></pre></div>
<h4 id="_5">☆ 非空查询<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c"># 查询没有分类的商品</span>
<span class="nb">SELECT </span><span class="p">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="nb">WHERE </span><span class="n">category_id</span> <span class="n">IS</span> <span class="n">NULL</span><span class="p">;</span>
<span class="c"># 查询有分类的商品</span>
<span class="nb">SELECT </span><span class="p">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="nb">WHERE </span><span class="n">category_id</span> <span class="n">IS</span> <span class="n">NOT</span> <span class="n">NULL</span><span class="p">;</span>
</code></pre></div>
<h3 id="5_1">5、排序查询<a class="headerlink" href="#5_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c"># 通过order by语句，可以将查询出的结果进行排序。暂时放置在select语句的最后。</span>
<span class="n">格式</span><span class="err">：</span><span class="nb">SELECT </span><span class="p">*</span> <span class="n">FROM</span> <span class="n">表名</span> <span class="n">ORDER</span> <span class="n">BY</span> <span class="n">排序字段</span> <span class="n">ASC</span><span class="p">|</span><span class="n">DESC</span><span class="p">;</span>
<span class="n">ASC</span> <span class="n">升序</span> <span class="p">(</span><span class="n">默认</span><span class="p">)</span>
<span class="n">DESC</span> <span class="n">降序</span>

<span class="c"># 1.使用价格排序(降序)</span>
<span class="nb">SELECT </span><span class="p">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="n">ORDER</span> <span class="n">BY</span> <span class="n">price</span> <span class="n">DESC</span><span class="p">;</span>
<span class="c"># 2.在价格排序(降序)的基础上，以分类排序(降序)</span>
<span class="nb">SELECT </span><span class="p">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="n">ORDER</span> <span class="n">BY</span> <span class="n">price</span> <span class="n">DESC</span><span class="p">,</span><span class="n">category_id</span> <span class="n">DESC</span><span class="p">;</span>
</code></pre></div>
<h3 id="6_1">6、聚合查询<a class="headerlink" href="#6_1" title="Permanent link">&para;</a></h3>
<p>之前我们做的查询都是横向查询，它们都是根据条件一行一行的进行判断，而使用聚合函数查询是纵向查询，它是对一列的值进行计算，然后返回一个单一的值；另外聚合函数会忽略空值。</p>
<p>今天我们学习如下五个聚合函数：</p>
<table>
<thead>
<tr>
<th><strong>聚合函数</strong></th>
<th><strong>作用</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>count()</td>
<td>统计指定列不为NULL的记录行数；</td>
</tr>
<tr>
<td>sum()</td>
<td>计算指定列的数值和，如果指定列类型不是数值类型，则计算结果为0</td>
</tr>
<tr>
<td>max()</td>
<td>计算指定列的最大值，如果指定列是字符串类型，使用字符串排序运算；</td>
</tr>
<tr>
<td>min()</td>
<td>计算指定列的最小值，如果指定列是字符串类型，使用字符串排序运算；</td>
</tr>
<tr>
<td>avg()</td>
<td>计算指定列的平均值，如果指定列类型不是数值类型，则计算结果为0</td>
</tr>
</tbody>
</table>
<p>案例演示：</p>
<div class="highlight"><pre><span></span><code><span class="c"># 1、查询商品的总条数</span>
<span class="nb">SELECT </span><span class="n">COUNT</span><span class="p">(*)</span> <span class="n">FROM</span> <span class="n">product</span><span class="p">;</span>
<span class="c"># 2、查询价格大于200商品的总条数</span>
<span class="nb">SELECT </span><span class="n">COUNT</span><span class="p">(*)</span> <span class="n">FROM</span> <span class="n">product</span> <span class="nb">WHERE </span><span class="n">price</span> <span class="p">&gt;</span> <span class="n">200</span><span class="p">;</span>
<span class="c"># 3、查询分类为&#39;c001&#39;的所有商品的总和</span>
<span class="nb">SELECT </span><span class="n">SUM</span><span class="p">(</span><span class="n">price</span><span class="p">)</span> <span class="n">FROM</span> <span class="n">product</span> <span class="nb">WHERE </span><span class="n">category_id</span> <span class="p">=</span> <span class="s1">&#39;c001&#39;</span><span class="p">;</span>
<span class="c"># 4、查询分类为&#39;c002&#39;所有商品的平均价格</span>
<span class="nb">SELECT </span><span class="n">AVG</span><span class="p">(</span><span class="n">price</span><span class="p">)</span> <span class="n">FROM</span> <span class="n">product</span> <span class="nb">WHERE </span><span class="n">categ</span> <span class="n">ory_id</span> <span class="p">=</span> <span class="s1">&#39;c002&#39;</span><span class="p">;</span>
<span class="c"># 5、查询商品的最大价格和最小价格</span>
<span class="nb">SELECT </span><span class="n">MAX</span><span class="p">(</span><span class="n">price</span><span class="p">),</span><span class="n">MIN</span><span class="p">(</span><span class="n">price</span><span class="p">)</span> <span class="n">FROM</span> <span class="n">product</span><span class="p">;</span>
</code></pre></div>
<h3 id="7having">7、分组查询与having子句<a class="headerlink" href="#7having" title="Permanent link">&para;</a></h3>
<h4 id="_6">☆ 分组查询介绍<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h4>
<p>分组查询就是将查询结果按照指定字段进行分组，字段中数据相等的分为一组。</p>
<p><strong>分组查询基本的语法格式如下：</strong></p>
<p>GROUP BY 列名 [HAVING 条件表达式] [WITH ROLLUP]</p>
<p><strong>说明:</strong></p>
<ul>
<li>列名: 是指按照指定字段的值进行分组。</li>
<li>HAVING 条件表达式: 用来过滤分组后的数据。</li>
<li>WITH ROLLUP：在所有记录的最后加上一条记录，显示select查询时聚合函数的统计和计算结果</li>
</ul>
<h4 id="group-by">☆ group by的使用<a class="headerlink" href="#group-by" title="Permanent link">&para;</a></h4>
<p>创建数据集</p>
<div class="highlight"><pre><span></span><code><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">students</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">auto_increment</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">age</span><span class="w"> </span><span class="n">tinyint</span><span class="w"> </span><span class="n">unsigned</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">gender</span><span class="w"> </span><span class="n">enum</span><span class="p">(</span><span class="s1">&#39;male&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;female&#39;</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">height</span><span class="w"> </span><span class="nb">float</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"></span>
<span class="p">)</span><span class="w"> </span><span class="n">engine</span><span class="o">=</span><span class="n">innodb</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">charset</span><span class="o">=</span><span class="n">utf8</span><span class="p">;</span><span class="w"></span>

<span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="s1">&#39;郭靖&#39;</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="s1">&#39;male&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">.</span><span class="mi">80</span><span class="p">);</span><span class="w"></span>
<span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="s1">&#39;黄蓉&#39;</span><span class="p">,</span><span class="mi">19</span><span class="p">,</span><span class="s1">&#39;female&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">.</span><span class="mi">65</span><span class="p">);</span><span class="w"></span>
<span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="s1">&#39;柯镇恶&#39;</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="s1">&#39;male&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">.</span><span class="mi">61</span><span class="p">);</span><span class="w"></span>
<span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="s1">&#39;黄药师&#39;</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="s1">&#39;male&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">.</span><span class="mi">72</span><span class="p">);</span><span class="w"></span>
<span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="s1">&#39;华筝&#39;</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="s1">&#39;female&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">.</span><span class="mi">60</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>group by可用于单个字段分组，也可用于多个字段分组</p>
<div class="highlight"><pre><span></span><code><span class="c1">-- 根据gender字段来分组</span>
<span class="k">select</span><span class="w"> </span><span class="n">gender</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">gender</span><span class="p">;</span><span class="w"></span>
<span class="c1">-- 根据name和gender字段进行分组</span>
<span class="k">select</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">gender</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">gender</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>① group by可以实现去重操作</p>
<p>② group by的作用是为了实现分组统计（group by + 聚合函数）</p>
<h4 id="group-by_1">☆ group by + 聚合函数的使用<a class="headerlink" href="#group-by_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">-- 统计不同性别的人的平均年龄</span>
<span class="k">select</span><span class="w"> </span><span class="n">gender</span><span class="p">,</span><span class="k">avg</span><span class="p">(</span><span class="n">age</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">gender</span><span class="p">;</span><span class="w"></span>
<span class="c1">-- 统计不同性别的人的个数</span>
<span class="k">select</span><span class="w"> </span><span class="n">gender</span><span class="p">,</span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">gender</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>执行原理图</p>
<p><img alt="image-20220225232628411" src="media/image-20220225232628411.png" /></p>
<h4 id="group-by-having">☆ group by + having的使用<a class="headerlink" href="#group-by-having" title="Permanent link">&para;</a></h4>
<p>having作用和where类似都是过滤数据的，但having是过滤分组数据的，只能用于group by</p>
<div class="highlight"><pre><span></span><code><span class="c1">-- 根据gender字段进行分组，统计分组条数大于2的</span>
<span class="k">select</span><span class="w"> </span><span class="n">gender</span><span class="p">,</span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">gender</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>案例演示：</p>
<div class="highlight"><pre><span></span><code><span class="c">#1 统计各个分类商品的个数</span>
<span class="nb">SELECT </span><span class="n">category_id</span> <span class="p">,</span><span class="n">COUNT</span><span class="p">(*)</span> <span class="n">FROM</span> <span class="n">product</span> <span class="nb">GROUP </span><span class="n">BY</span> <span class="n">category_id</span> <span class="p">;</span>

<span class="c">#2 统计各个分类商品的个数,且只显示个数大于1的信息</span>
<span class="nb">SELECT </span><span class="n">category_id</span> <span class="p">,</span><span class="n">COUNT</span><span class="p">(*)</span> <span class="n">FROM</span> <span class="n">product</span> <span class="nb">GROUP </span><span class="n">BY</span> <span class="n">category_id</span> <span class="n">HAVING</span> <span class="n">COUNT</span><span class="p">(*)</span> <span class="p">&gt;</span> <span class="n">1</span><span class="p">;</span>
</code></pre></div>
<h4 id="with-rollup">☆ 扩展：with rollup回溯统计<a class="headerlink" href="#with-rollup" title="Permanent link">&para;</a></h4>
<p>之前的统计操作都是针对分组中的信息进行统计，那如果我们想在分组统计以后，在针对所有分组进行一个汇总，应该如何实现呢？</p>
<p>答：使用with rollup回溯统计</p>
<p>举个例子：针对students学生表，统计每个性别下的同学数量，如果这个时候，我们还想显示班级的总人数（分组数据汇总），就可以在这个SQL语句的后面一个with rollup了。</p>
<div class="highlight"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="n">gender</span><span class="p">,</span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">gender</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="k">rollup</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<h3 id="8limit">8、limit分页查询<a class="headerlink" href="#8limit" title="Permanent link">&para;</a></h3>
<p>作用：限制数据的查询数量</p>
<p>基本语法：</p>
<div class="highlight"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="err">数据表</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="err">查询数量</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>案例：查询学生表中，身高最高的3名同学信息</p>
<div class="highlight"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>limit除了可以限制查询数量以外，其还可以指定从哪条数据开始查起，limit完整语法：</p>
<div class="highlight"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="k">offset</span><span class="p">,</span><span class="k">count</span><span class="p">;</span><span class="w"></span>

<span class="k">offset</span><span class="err">：索引，默认从</span><span class="mi">0</span><span class="err">开始</span><span class="w"></span>
<span class="k">count</span><span class="err">：查询总数量</span><span class="w"></span>
</code></pre></div>
<p>案例：查询学生表中，身高第2、3高的同学信息</p>
<div class="highlight"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>limit子句典型应用场景：</p>
<p>分页查询在项目开发中常见，由于数据量很大，显示屏长度有限，因此对数据需要采取分页显示方式。例如数据共有30条，每页显示5条，第一页显示1-5条，第二页显示6-10条。</p>
<p>格式：</p>
<div class="highlight"><pre><span></span><code><span class="nb">SELECT </span><span class="n">字段1</span><span class="err">，</span><span class="n">字段2</span><span class="p">...</span> <span class="n">FROM</span> <span class="n">表名</span> <span class="n">LIMIT</span> <span class="n">M</span><span class="p">,</span><span class="n">N</span>
<span class="n">M</span><span class="p">:</span> <span class="n">整数</span><span class="err">，</span><span class="n">表示从第几条索引开始</span><span class="err">，</span><span class="n">计算方式</span> <span class="err">（</span><span class="n">当前页</span><span class="p">-</span><span class="n">1</span><span class="err">）</span><span class="p">*</span> <span class="n">每页显示条数</span>
<span class="n">N</span><span class="p">:</span> <span class="n">整数</span><span class="err">，</span><span class="n">表示查询多少条数据</span>
<span class="nb">SELECT </span><span class="n">字段1</span><span class="err">，</span><span class="n">字段2</span><span class="p">...</span> <span class="n">FROM</span> <span class="n">表名</span> <span class="n">LIMIT</span> <span class="n">0</span><span class="p">,</span><span class="n">5</span>
<span class="nb">SELECT </span><span class="n">字段1</span><span class="err">，</span><span class="n">字段2</span><span class="p">...</span> <span class="n">FROM</span> <span class="n">表名</span> <span class="n">LIMIT</span> <span class="n">5</span><span class="p">,</span><span class="n">5</span>
</code></pre></div>
<h3 id="9">9、小结<a class="headerlink" href="#9" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">SQL查询五子句</span><span class="err">：</span>
<span class="nb">select </span><span class="p">*</span> <span class="n">from</span> <span class="n">表名</span> <span class="n">where子句</span> <span class="nb">group </span><span class="n">by子句</span> <span class="n">having子句</span> <span class="n">order</span> <span class="n">by子句</span> <span class="n">limit子句</span><span class="p">;</span>
<span class="n">特别注意</span><span class="err">：</span><span class="n">查询五子句中</span><span class="err">，</span><span class="n">五子句的顺序一定要严格按照以上格式</span><span class="err">。</span>

<span class="n">条件查询</span><span class="err">：</span><span class="nb">SELECT </span><span class="p">*|</span><span class="n">字段名</span> <span class="n">FROM</span> <span class="n">表名</span> <span class="nb">WHERE </span><span class="n">条件</span><span class="err">；</span>
<span class="n">排序查询</span><span class="err">：</span><span class="nb">SELECT </span><span class="p">*</span> <span class="n">FROM</span> <span class="n">表名</span> <span class="n">ORDER</span> <span class="n">BY</span> <span class="n">排序字段</span> <span class="n">ASC</span><span class="p">|</span><span class="n">DESC</span><span class="p">;</span>
<span class="n">聚合查询函数</span><span class="err">：</span><span class="n">count</span><span class="p">()</span><span class="err">，</span><span class="n">sum</span><span class="p">()</span><span class="err">，</span><span class="n">max</span><span class="p">()</span><span class="err">，</span><span class="n">min</span><span class="p">()</span><span class="err">，</span><span class="n">avg</span><span class="p">()</span><span class="err">。</span>
<span class="n">分组查询</span><span class="err">：</span><span class="nb">SELECT </span><span class="n">字段1</span><span class="p">,</span><span class="n">字段2</span><span class="err">…</span> <span class="n">FROM</span> <span class="n">表名</span> <span class="nb">GROUP </span><span class="n">BY</span> <span class="n">分组字段</span> <span class="n">HAVING</span> <span class="n">分组条件</span><span class="p">;</span>
<span class="n">分页查询</span><span class="err">：</span>
<span class="nb">SELECT </span><span class="n">字段1</span><span class="err">，</span><span class="n">字段2</span><span class="p">...</span> <span class="n">FROM</span> <span class="n">表名</span> <span class="n">LIMIT</span> <span class="n">M</span><span class="p">,</span><span class="n">N</span>
<span class="n">M</span><span class="p">:</span> <span class="n">整数</span><span class="err">，</span><span class="n">表示从第几条索引开始</span><span class="err">，</span><span class="n">计算方式</span> <span class="err">（</span><span class="n">当前页</span><span class="p">-</span><span class="n">1</span><span class="err">）</span><span class="p">*</span><span class="n">每页显示条数</span>
<span class="n">N</span><span class="p">:</span> <span class="n">整数</span><span class="err">，</span><span class="n">表示查询多少条数据</span>
</code></pre></div>
<h2 id="_7">十一、多表查询<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h2>
<h3 id="_8">数据集准备<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p>classes班级表</p>
<div class="highlight"><pre><span></span><code><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">classes</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">cls_id</span><span class="w"> </span><span class="n">tinyint</span><span class="w"> </span><span class="n">auto_increment</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">cls_name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">cls_id</span><span class="p">)</span><span class="w"></span>
<span class="p">)</span><span class="w"> </span><span class="n">engine</span><span class="o">=</span><span class="n">innodb</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">charset</span><span class="o">=</span><span class="n">utf8</span><span class="p">;</span><span class="w"></span>

<span class="c1">-- 插入测试数据</span>
<span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">classes</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;ui&#39;</span><span class="p">);</span><span class="w"></span>
<span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">classes</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;java&#39;</span><span class="p">);</span><span class="w"></span>
<span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">classes</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;python&#39;</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>students学生表</p>
<div class="highlight"><pre><span></span><code><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">students</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">auto_increment</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">age</span><span class="w"> </span><span class="n">tinyint</span><span class="w"> </span><span class="n">unsigned</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">gender</span><span class="w"> </span><span class="n">enum</span><span class="p">(</span><span class="s1">&#39;male&#39;</span><span class="p">,</span><span class="s1">&#39;female&#39;</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">score</span><span class="w"> </span><span class="nb">float</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">cls_id</span><span class="w"> </span><span class="n">tinyint</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"></span>
<span class="p">)</span><span class="w"> </span><span class="n">engine</span><span class="o">=</span><span class="n">innodb</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">charset</span><span class="o">=</span><span class="n">utf8</span><span class="p">;</span><span class="w"></span>

<span class="c1">-- 插入测试数据</span>
<span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="s1">&#39;刘备&#39;</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="s1">&#39;male&#39;</span><span class="p">,</span><span class="mi">90</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span><span class="w"></span>
<span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="s1">&#39;貂蝉&#39;</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="s1">&#39;female&#39;</span><span class="p">,</span><span class="mi">75</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="s1">&#39;赵云&#39;</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span><span class="s1">&#39;male&#39;</span><span class="p">,</span><span class="mi">95</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span><span class="w"></span>
<span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="s1">&#39;关羽&#39;</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="s1">&#39;male&#39;</span><span class="p">,</span><span class="mi">98</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span><span class="w"></span>
<span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="s1">&#39;大乔&#39;</span><span class="p">,</span><span class="mi">19</span><span class="p">,</span><span class="s1">&#39;female&#39;</span><span class="p">,</span><span class="mi">80</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<h3 id="_9">交叉连接(了解)<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<p>没有意思，但是它是所有连接的基础。其功能就是将表1和表2中的每一条数据进行连接。</p>
<p>结果：</p>
<p>字段数 = 表1字段 + 表2的字段</p>
<p>记录数 = 表1中的总数量 * 表2中的总数量（笛卡尔积）</p>
<div class="highlight"><pre><span></span><code><span class="nb">select </span><span class="p">*</span> <span class="n">from</span> <span class="n">students</span> <span class="n">cross</span> <span class="n">join</span> <span class="n">classes</span><span class="p">;</span>
<span class="n">或</span>
<span class="nb">select </span><span class="p">*</span> <span class="n">from</span> <span class="n">students</span><span class="p">,</span> <span class="n">classes</span><span class="p">;</span>
</code></pre></div>
<p><img alt="image-20210330160813460" src="media/image-20210330160813460.png" /></p>
<h3 id="1_2">1、内连接<a class="headerlink" href="#1_2" title="Permanent link">&para;</a></h3>
<h4 id="_10">☆ 连接查询的介绍<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h4>
<p>连接查询可以实现多个表的查询，当查询的字段数据来自不同的表就可以使用连接查询来完成。</p>
<p>连接查询可以分为:</p>
<ol>
<li>内连接查询</li>
<li>左外连接查询</li>
<li>右外连接查询</li>
</ol>
<h4 id="_11">☆ 内连接查询<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h4>
<p>查询两个表中符合条件的共有记录</p>
<p><img alt="image-20210329231722765" src="media/image-20210329231722765.png" /></p>
<p><strong>内连接查询语法格式:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="err">字段</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="err">表</span><span class="mi">1</span><span class="w"> </span><span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="err">表</span><span class="mi">2</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="err">表</span><span class="mi">1</span><span class="p">.</span><span class="err">字段</span><span class="mi">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">表</span><span class="mi">2</span><span class="p">.</span><span class="err">字段</span><span class="mi">2</span><span class="w"></span>
</code></pre></div>
<p><strong>说明:</strong></p>
<ul>
<li>inner join 就是内连接查询关键字</li>
<li>on 就是连接查询条件</li>
</ul>
<p><strong>例1：使用内连接查询学生表与班级表:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">classes</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">c</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">cls_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">id</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<h4 id="_12">☆ 小结<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h4>
<ul>
<li>内连接使用inner join .. on .., on 表示两个表的连接查询条件</li>
<li>内连接根据连接查询条件取出两个表的 “交集”</li>
</ul>
<h3 id="2_1">2、左外连接<a class="headerlink" href="#2_1" title="Permanent link">&para;</a></h3>
<h4 id="_13">☆ 左连接查询<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<p>以左表为主根据条件查询右表数据，如果根据条件查询右表数据不存在使用null值填充</p>
<p><img alt="image-20210329232043956" src="media/image-20210329232043956.png" /></p>
<p><strong>左连接查询语法格式:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="err">字段</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="err">表</span><span class="mi">1</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="err">表</span><span class="mi">2</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="err">表</span><span class="mi">1</span><span class="p">.</span><span class="err">字段</span><span class="mi">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">表</span><span class="mi">2</span><span class="p">.</span><span class="err">字段</span><span class="mi">2</span><span class="w"></span>
</code></pre></div>
<p><strong>说明:</strong></p>
<ul>
<li>left join 就是左连接查询关键字</li>
<li>on 就是连接查询条件</li>
<li>表1 是左表</li>
<li>表2 是右表</li>
</ul>
<p><strong>例1：使用左连接查询学生表与班级表:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">classes</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">c</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">cls_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">id</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p><strong>例2：查询学生表中每一位学生（包括没有对应班级的学生）所属的班级信息</strong></p>
<p>前提：</p>
<p>在students学生表中，插入一条测试数据</p>
<div class="highlight"><pre><span></span><code><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="s1">&#39;林黛玉&#39;</span><span class="p">,</span><span class="mi">19</span><span class="p">,</span><span class="s1">&#39;female&#39;</span><span class="p">,</span><span class="mi">96</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span><span class="mi">99</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>执行左外连接查询：</p>
<div class="highlight"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">left</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">classes</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">c</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">cls_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">id</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<h4 id="_14">☆ 小结<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h4>
<ul>
<li>左连接使用left join .. on .., on 表示两个表的连接查询条件</li>
<li>左连接以左表为主根据条件查询右表数据，右表数据不存在使用null值填充。</li>
</ul>
<h3 id="3_2">3、右外连接<a class="headerlink" href="#3_2" title="Permanent link">&para;</a></h3>
<h4 id="_15">☆ 右连接查询<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h4>
<p>以右表为主根据条件查询左表数据，如果根据条件查询左表数据不存在使用null值填充</p>
<p><img alt="image-20210329232137674" src="media/image-20210329232137674.png" /></p>
<p><strong>右连接查询语法格式:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="err">字段</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="err">表</span><span class="mi">1</span><span class="w"> </span><span class="k">right</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="err">表</span><span class="mi">2</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="err">表</span><span class="mi">1</span><span class="p">.</span><span class="err">字段</span><span class="mi">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">表</span><span class="mi">2</span><span class="p">.</span><span class="err">字段</span><span class="mi">2</span><span class="w"></span>
</code></pre></div>
<p><strong>说明:</strong></p>
<ul>
<li>right join 就是右连接查询关键字</li>
<li>on 就是连接查询条件</li>
<li>表1 是左表</li>
<li>表2 是右表</li>
</ul>
<p><strong>例1：使用右连接查询学生表与班级表:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">right</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">classes</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">c</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">cls_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">id</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<h4 id="_16">☆ 小结<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h4>
<ul>
<li>右连接使用right join .. on .., on 表示两个表的连接查询条件</li>
<li>右连接以右表为主根据条件查询左表数据，左表数据不存在使用null值填充。</li>
</ul>
<h2 id="_17">十二、子查询(三步走)<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h2>
<h3 id="1_3">1、子查询（嵌套查询）的介绍<a class="headerlink" href="#1_3" title="Permanent link">&para;</a></h3>
<p>在一个 select 语句中,嵌入了另外一个 select 语句, 那么被嵌入的 select 语句称之为子查询语句，外部那个select语句则称为主查询.</p>
<p><strong>主查询和子查询的关系:</strong></p>
<ol>
<li>子查询是嵌入到主查询中</li>
<li>子查询是辅助主查询的,要么充当条件,要么充当数据源(数据表)</li>
<li>子查询是可以独立存在的语句,是一条完整的 select 语句</li>
</ol>
<h3 id="2_2">2、子查询的使用<a class="headerlink" href="#2_2" title="Permanent link">&para;</a></h3>
<p><strong>例1. 查询学生表中大于平均年龄的所有学生:</strong></p>
<p>需求：查询年龄 &gt; 平均年龄的所有学生</p>
<p>前提：① 获取所有学生的平均年龄</p>
<p>​             ② 查询表中的所有记录，判断哪个同学 &gt; 平均年龄值</p>
<p>第一步：写子查询</p>
<div class="highlight"><pre><span></span><code><span class="nb">select </span><span class="n">avg</span><span class="p">(</span><span class="n">age</span><span class="p">)</span> <span class="n">from</span> <span class="n">students</span><span class="p">;</span>
</code></pre></div>
<p>第二步：写主查询</p>
<div class="highlight"><pre><span></span><code><span class="nb">select </span><span class="p">*</span> <span class="n">from</span> <span class="n">students</span> <span class="nb">where </span><span class="n">age</span> <span class="p">&gt;</span> <span class="p">(</span><span class="n">平均值</span><span class="p">);</span>
</code></pre></div>
<p>第三步：第一步和第二步进行合并</p>
<div class="highlight"><pre><span></span><code><span class="nb">select </span><span class="p">*</span> <span class="n">from</span> <span class="n">students</span> <span class="nb">where </span><span class="n">age</span> <span class="p">&gt;</span> <span class="p">(</span><span class="nb">select </span><span class="n">avg</span><span class="p">(</span><span class="n">age</span><span class="p">)</span> <span class="n">from</span> <span class="n">students</span><span class="p">);</span>
</code></pre></div>
<p><strong>例2. 查询学生在班的所有班级名字:</strong></p>
<p>需求：显示所有有学生的班级名称</p>
<p>前提：① 先获取所有学员都属于那些班级</p>
<p>​            ② 查询班级表中的所有记录，判断是否出现在①结果中，如果在，则显示，不在，则忽略。</p>
<p>第一步：编写子查询</p>
<div class="highlight"><pre><span></span><code><span class="nb">select </span><span class="n">distinct</span> <span class="n">cls_id</span> <span class="n">from</span> <span class="n">students</span> <span class="n">is</span> <span class="n">not</span> <span class="n">null</span><span class="p">;</span>
</code></pre></div>
<p>第二步：编写主查询</p>
<div class="highlight"><pre><span></span><code><span class="nb">select </span><span class="p">*</span> <span class="n">from</span> <span class="n">classes</span> <span class="nb">where </span><span class="n">cls_id</span> <span class="k">in</span> <span class="p">(</span><span class="n">1</span><span class="p">,</span> <span class="n">2</span><span class="p">,</span> <span class="n">3</span><span class="p">);</span>
</code></pre></div>
<p>第三步：把主查询和子查询合并</p>
<div class="highlight"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">classes</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">cls_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">cls_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">cls_id</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p><strong>例3. 查找年龄最小,成绩最低的学生:</strong></p>
<p>第一步：获取年龄最小值和成绩最小值</p>
<div class="highlight"><pre><span></span><code><span class="nb">select </span><span class="n">min</span><span class="p">(</span><span class="n">age</span><span class="p">),</span> <span class="n">min</span><span class="p">(</span><span class="n">score</span><span class="p">)</span> <span class="n">from</span> <span class="n">student</span><span class="p">;</span>
</code></pre></div>
<p>第二步：查询所有学员信息（主查询）</p>
<div class="highlight"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">students</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="p">(</span><span class="n">age</span><span class="p">,</span><span class="w"> </span><span class="n">score</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="err">最小年龄</span><span class="p">,</span><span class="w"> </span><span class="err">最少成绩</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>第三步：把第一步和第二步合并</p>
<div class="highlight"><pre><span></span><code><span class="nb">select </span><span class="p">*</span> <span class="n">from</span> <span class="n">students</span> <span class="nb">where </span><span class="p">(</span><span class="n">age</span><span class="p">,</span> <span class="n">score</span><span class="p">)</span> <span class="p">=</span> <span class="p">(</span><span class="nb">select </span><span class="n">min</span><span class="p">(</span><span class="n">age</span><span class="p">),</span> <span class="n">min</span><span class="p">(</span><span class="n">score</span><span class="p">)</span> <span class="n">from</span> <span class="n">students</span><span class="p">);</span>
</code></pre></div>
<h3 id="3_3">3、小结<a class="headerlink" href="#3_3" title="Permanent link">&para;</a></h3>
<p>子查询是一个完整的SQL语句，子查询被嵌入到一对小括号里面</p>
<h2 id="_18">掌握子查询编写三步走<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h2>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="页脚">
      
        
        <a href="MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%801.html" class="md-footer__link md-footer__link--prev" aria-label="上一页: 1 MySQL数据库基础I" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                上一页
              </span>
              1 MySQL数据库基础I
            </div>
          </div>
        </a>
      
      
        
        <a href="MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E9%AB%98%E7%BA%A7.html" class="md-footer__link md-footer__link--next" aria-label="下一页: 3 MySQL高级" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                下一页
              </span>
              3 MySQL高级
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "\u590d\u5236", "clipboard.copied": "\u5df2\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\uff0c\\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.term.missing": "\u7f3a\u5c11", "select.version.title": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "search": "../assets/javascripts/workers/search.bd0b6b67.min.js"}</script>
    
    
      <script src="../assets/javascripts/bundle.467223ff.min.js"></script>
      
        <script src="../js/extra.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>